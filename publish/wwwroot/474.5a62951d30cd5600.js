"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[474],{7474:(R,c,l)=>{l.r(c),l.d(c,{AccountModule:()=>A});var u=l(9808),s=l(5497),o=l(2382),t=l(4893),m=l(9479),g=l(4015);let d=(()=>{class n{constructor(e,r,a){this.accountSerivce=e,this.router=r,this.activatedRoute=a}ngOnInit(){this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop",this.createLoginForm()}createLoginForm(){this.loginForm=new o.cw({email:new o.NI("",[o.kI.required,o.kI.pattern("^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$")]),password:new o.NI("",o.kI.required)})}onSubmit(){this.accountSerivce.login(this.loginForm.value).subscribe(()=>{this.router.navigateByUrl(this.returnUrl)},e=>{console.log(e)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.B),t.Y36(s.F0),t.Y36(s.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:9,vars:5,consts:[[1,"d-flex","justify-content-center","mt-5"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"h3","mb-3","font-weight-normal"],["formControlName","email",3,"label"],["formControlName","password",3,"label","type"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block",3,"disabled"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(2,"div",2)(3,"h1",3),t._uU(4,"Login"),t.qZA()(),t._UZ(5,"app-text-input",4)(6,"app-text-input",5),t.TgZ(7,"button",6),t._uU(8," Sign in "),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",r.loginForm),t.xp6(4),t.Q6J("label","Email Address"),t.xp6(1),t.Q6J("label","Password")("type","password"),t.xp6(1),t.Q6J("disabled",r.loginForm.invalid))},directives:[o._Y,o.JL,o.sg,g.t,o.JJ,o.u],styles:[".form-label-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.form-label-group[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{padding:var(--input-padding-y) var(--input-padding-x)}.form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:block;width:100%;margin-bottom:0;line-height:1.5;color:#495057;border:1px solid transparent;border-radius:.25rem;transition:all .1s ease-in-out}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:transparent}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown){padding-top:calc(var(--input-padding-y) + var(--input-padding-y) * .6666666667);padding-bottom:calc(var(--input-padding-y) / 3)}.form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) ~ label[_ngcontent-%COMP%]{padding-top:calc(var(--input-padding-y) / 3);padding-bottom:calc(var(--input-padding-y) / 3);font-size:12px;color:#777}"]}),n})();var f=l(8306),b=l(4986),h=l(3532);var C=l(3900),x=l(9646),M=l(4004);function F(n,i){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e," ")}}function J(n,i){if(1&n&&(t.TgZ(0,"ul",9),t.YNc(1,F,2,1,"li",10),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.errors)}}const w=[{path:"login",component:d},{path:"register",component:(()=>{class n{constructor(e,r,a){this.fb=e,this.accountService=r,this.router=a}ngOnInit(){this.createRegisterForm()}createRegisterForm(){this.registerForm=this.fb.group({displayName:[null,[o.kI.required]],email:[null,[o.kI.required,o.kI.pattern("^[\\w-.]+@([\\w-]+.)+[\\w-]{2,4}$")],[this.validateEmailNotTaken()]],password:[null,[o.kI.required]]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe(e=>{this.router.navigateByUrl("/shop")},e=>{console.log(e),this.errors=e.errors})}validateEmailNotTaken(){return e=>function y(n=0,i,e=b.P){let r=-1;return null!=i&&((0,h.K)(i)?e=i:r=i),new f.y(a=>{let p=function v(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;p<0&&(p=0);let O=0;return e.schedule(function(){a.closed||(a.next(O++),0<=r?this.schedule(void 0,r):a.complete())},p)})}(500).pipe((0,C.w)(()=>e.value?this.accountService.checkEmailExists(e.value).pipe((0,M.U)(r=>r?{emailExists:!0}:null)):(0,x.of)(null)))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(o.qu),t.Y36(m.B),t.Y36(s.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-register"]],decls:11,vars:7,consts:[[1,"d-flex","justify-content-center","mt-5"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"h3","mb-3","font-weight-normal"],["formControlName","displayName",3,"label"],["formControlName","email",3,"label"],["formControlName","password",3,"label","type"],["class","text-danger",4,"ngIf"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block",3,"disabled"],[1,"text-danger"],[4,"ngFor","ngForOf"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(2,"div",2)(3,"h1",3),t._uU(4,"Register"),t.qZA()(),t._UZ(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6),t.YNc(8,J,2,1,"ul",7),t.TgZ(9,"button",8),t._uU(10," Register "),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",r.registerForm),t.xp6(4),t.Q6J("label","Display Name"),t.xp6(1),t.Q6J("label","Email Address"),t.xp6(1),t.Q6J("label","Password")("type","password"),t.xp6(1),t.Q6J("ngIf",r.errors),t.xp6(1),t.Q6J("disabled",r.registerForm.invalid))},directives:[o._Y,o.JL,o.sg,g.t,o.JJ,o.u,u.O5,u.sg],styles:[""]}),n})()}];let N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[s.Bz.forChild(w)],s.Bz]}),n})();var P=l(4466);let A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,N,P.m]]}),n})()}}]);